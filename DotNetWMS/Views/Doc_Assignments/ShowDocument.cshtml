@using Microsoft.AspNetCore.Html
@model DotNetWMS.Models.Doc_Assignment

@{
    ViewData["Title"] = "GenerateDocument";
}
<div>
    <div class="d-flex justify-content-between">
        <h2 class="my-0" id="docTitle">@ViewData["DocumentTitle"]</h2>
    </div>
</div>
<hr />
<div class="mb-3" id="docToPrint">
    <a asp-action="Index" class="btn btn-outline-dark btn-sm d-print-none"><i class="fas fa-arrow-left mr-1"></i>Wróć do podglądu</a>
    <form method="post">
        <div class="form-row">
            @if (!String.IsNullOrEmpty(Model.UserFrom))
            {
                <div class="form-group col-md-6">
                    <label asp-for="UserFrom"></label>
                    <h6>@Model.UserFromName</h6>
                    <input type="hidden" asp-for="@Model.UserFrom" />
                    <input type="hidden" asp-for="@Model.UserFromName" />
                </div>
            }

            @if (Model.WarehouseFrom != null)
            {
                <div class="form-group col-md-6">
                    <label asp-for="WarehouseFrom"></label>
                    <h6>@Model.WarehouseFromName</h6>
                    <input type="hidden" asp-for="@Model.WarehouseFrom" />
                    <input type="hidden" asp-for="@Model.WarehouseFromName" />
                </div>
            }

            @if (Model.ExternalFrom != null)
            {
                <div class="form-group col-md-6">
                    <label asp-for="ExternalFrom"></label>
                    <h6>@Model.ExternalFromName</h6>
                    <input type="hidden" asp-for="@Model.ExternalFrom" />
                    <input type="hidden" asp-for="@Model.ExternalFromName" />
                </div>
            }

            @if (!String.IsNullOrEmpty(Model.UserTo))
            {
                <div class="form-group col-md-6">
                    <label asp-for="UserTo"></label>
                    <h6>@Model.UserToName</h6>
                    <input type="hidden" asp-for="@Model.UserTo" />
                    <input type="hidden" asp-for="@Model.UserToName" />
                </div>
            }

            @if (Model.WarehouseTo != null)
            {
                <div class="form-group col-md-6">
                    <label asp-for="WarehouseTo"></label>
                    <h6>@Model.WarehouseToName</h6>
                    <input type="hidden" asp-for="@Model.WarehouseTo" />
                    <input type="hidden" asp-for="@Model.WarehouseToName" />
                </div>
            }

            @if (Model.ExternalTo != null)
            {
                <div class="form-group col-md-6">
                    <label asp-for="ExternalTo"></label>
                    <h6>@Model.ExternalToName</h6>
                    <input type="hidden" asp-for="@Model.ExternalTo" />
                    <input type="hidden" asp-for="@Model.ExternalToName" />
                </div>
            }
            <input type="hidden" asp-for="@Model.DocumentId" />
            <input type="hidden" asp-for="@Model.Title" />
            <input type="hidden" asp-for="@Model.CreationDate" />
        </div>


        <table class="table table-hover table-responsive-sm">
            <thead class="thead-light">
                <tr>
                    <th>
                        Typ
                    </th>
                    <th>
                        Nazwa
                    </th>
                    <th>
                        Producent
                    </th>
                    <th>
                        Model
                    </th>
                    <th>
                        Kod
                    </th>
                    <th>
                        Ilość
                    </th>
                    <th>
                        Jedn.
                    </th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                @for (int i = 0; i < Model.Items.Count; i++)
                {
                    <tr>
                        <td>
                            @Model.Items[i].Type
                            <input type="hidden" asp-for="@Model.Items[i].Type" />
                        </td>
                        <td>
                            @Model.Items[i].Name
                            <input type="hidden" asp-for="@Model.Items[i].Name" />
                        </td>
                        <td>
                            @Model.Items[i].Producer
                            <input type="hidden" asp-for="@Model.Items[i].Producer" />
                        </td>
                        <td>
                            @Model.Items[i].Model
                            <input type="hidden" asp-for="@Model.Items[i].Model" />
                        </td>
                        <td>
                            @Model.Items[i].ItemCode
                            <input type="hidden" asp-for="@Model.Items[i].ItemCode" />
                        </td>
                        <td>
                            @Model.Items[i].Quantity
                            <input type="hidden" asp-for="@Model.Items[i].Quantity" />
                        </td>
                        <td>
                            @Model.Items[i].Units
                            <input type="hidden" asp-for="@Model.Items[i].Units" />
                        </td>
                        <td>
                            <input type="hidden" asp-for="@Model.Items[i].ExternalId" />
                            <input type="hidden" asp-for="@Model.Items[i].WarehouseId" />
                            <input type="hidden" asp-for="@Model.Items[i].UserId" />
                            <input type="hidden" asp-for="@Model.Items[i].State" />
                            <input type="hidden" asp-for="@Model.Items[i].WarrantyDate" />
                            <input type="hidden" asp-for="@Model.Items[i].Id" />
                        </td>
                    </tr>
                }
            </tbody>
        </table>

    </form>

    <div class="mt-3">
        <button class="btn btn-info btn-sm d-print-none" onclick="printDocument('docToPrint')">Drukuj</button>
    </div>

    <div class="form-row d-none d-print-block">
        <div class="form-group col-md-3">
            <h2>......................</h2>
            <h6>Podpis wydającego</h6>
        </div>
        <div class="form-group col-md-3">
            <h2>......................</h2>
            <h6>Podpis odbiorcy</h6>
        </div>
    </div>


    <div id="divPartial" class="mt-3">

    </div>

</div>

@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}

    <script>

        function printDocument(el) {
            var restorepage = document.body.innerHTML;
            var printcontent = document.getElementById(el).innerHTML;
            document.body.innerHTML = document.getElementById('docTitle').innerHTML;
            document.body.innerHTML += printcontent;
            window.print();
            document.body.innerHTML = restorepage;
        }

    </script>
}
